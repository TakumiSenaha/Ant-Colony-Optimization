# 図の説明（論文用）

## 概要

本図は、従来手法（Conventional Method）と提案手法（Proposed Method）の性能を比較した結果を示しています。3 つの異なる環境（静的グラフ、コンテンツ要求ノード変動、帯域変動）において、最適解選択率（Optimal Path Selection Ratio）を世代ごとにプロットしています。

---

## グラフの構成要素

### 軸の説明

- **横軸（X 軸）: Generation（世代）**

  - 0 から 1000 世代まで
  - 各世代で 10 匹のアリが探索を実行
  - 1 世代 = 10 匹のアリが全て探索を完了するまでの 1 サイクル

- **縦軸（Y 軸）: Optimal Path Selection Ratio [%]（最適解選択率）**
  - 0%から 100%の範囲
  - 各世代において、100 回の独立したシミュレーションのうち、**少なくとも 1 匹のアリが最適解を発見したシミュレーションの割合**を表す
  - 計算式: (最適解を発見したシミュレーション数 / 総シミュレーション数) × 100
  - 例：80% = 100 回のシミュレーション中、80 回はその世代で最適解を発見できた

### 凡例（ラベル）

- **Conventional Method（従来手法）**: 灰色の丸印（○）でプロット
- **Proposed Method（提案手法）**: 黒色の四角印（□）でプロット

---

## 3 つの環境設定

### 環境 1: Static Graph（静的グラフ）

**設定内容:**

- **スタートノード切り替え**: 無効（`start_switching.enabled: false`）
- **帯域変動**: 無効（`fluctuation.enabled: false`）
- **特徴**: ネットワークトポロジーとエッジの帯域幅が全世代を通じて固定

**実験条件:**

- 各シミュレーションで、ランダムに選択された 1 組のスタートノードとゴールノードが固定
- 1000 世代にわたって同じスタート・ゴールペアで探索を継続
- 最適解は最初の世代で計算され、以降は変更されない

**この環境での評価目的:**

- 固定されたエンドポイントでの基本的な収束性能を評価
- 提案手法の自律学習メカニズムが、安定した環境でどの程度効果的に最適解に収束するかを検証

結果（簡単な）：提案手法は最終的には 80%まで伸びた．従来手法は，30%ほどの成功率だった．

---

### 環境 2: Node Switching（コンテンツ要求ノード変動）

**設定内容:**

- **スタートノード切り替え**: 有効（`start_switching.enabled: true`）
- **切り替え間隔**: 100 世代ごと（`switch_interval: 100`）
- **帯域変動**: 無効（`fluctuation.enabled: false`）
- **特徴**: ICN（Information-Centric Networking）を模擬した動的環境

**実験条件:**

- 各シミュレーションで、10 個のスタートノードが事前にランダムに選択される
- 最初の 100 世代（世代 0-99）: スタートノード 1 から探索開始、ゴールノードは 1 つ
- 100 世代目: スタートノードがスタートノード 2 に切り替わる。**以前のスタートノード 1 が新しいゴールとして追加される**（キャッシュ化）
- 200 世代目: スタートノードがスタートノード 3 に切り替わる。以前のスタートノード 2 がゴールとして追加される
- このように、ゴールノードが徐々に増加していく（最大 10 個まで）
- **最適解の定義**: 複数のゴールノードがある場合、全ゴールへの経路の中で**最大ボトルネック帯域を持つ経路**を最適解とする
- 最適解は、スタートノードが切り替わる度（100 世代ごと）に再計算される

**この環境での評価目的:**

- 動的に変化するエンドポイントに対する適応性を評価
- 提案手法の自律学習メカニズムが、新しいキャッシュ（ゴール）の出現にどの程度迅速に対応できるかを検証
- ICN のような動的アーキテクチャでの実用性を確認

結果（簡単な）：どちらもコンテンツ要求ノードを切り替えた際（100 世代毎）には，成功率が下がる．しかし，それでも提案手法の方が提案手法は最終的には 80%まで伸びた．従来手法は，30%ほどの成功率だった．

---

### 環境 3: Bandwidth Fluctuation（帯域変動）

**設定内容:**

- **スタートノード切り替え**: 無効（`start_switching.enabled: false`）
- **帯域変動**: 有効（`fluctuation.enabled: true`）
- **変動モデル**: AR1（自己回帰モデル、`model: "ar1"`）
- **変動対象**: ハブノードの上位 10%（`target_method: "hub"`, `target_percentage: 0.1`）
- **更新間隔**: 1 世代ごと（`update_interval: 1`）
- **特徴**: ネットワークトポロジーは固定だが、特定のエッジの帯域幅が時間とともに変動

**実験条件:**

- 各シミュレーションで、ランダムに選択された 1 組のスタートノードとゴールノードが固定
- ハブノード（接続数が多いノード）に接続されたエッジの帯域幅が、AR1 モデルに基づいて 1 世代ごとに変動
- 変動するエッジは全エッジの約 10%
- 最適解は、帯域が変動する度（1 世代ごと）に再計算される

**この環境での評価目的:**

- ネットワーク状態の動的変化に対する適応性を評価
- 提案手法の自律学習メカニズムが、古い情報を忘却し、新しい環境に適応する能力を検証
- 実ネットワークでの帯域変動に対する堅牢性を確認

結果（簡単な）：提案手法は最終的には 60%ちょいまで伸びた．従来手法は，10%ほどの成功率だった．

---

## 共通の実験設定

以下の設定は、3 つの環境すべてで共通です：

- **世代数**: 1000 世代
- **1 世代あたりのアリ数**: 10 匹
- **独立シミュレーション数**: 100 回（統計的信頼性のため）
- **ネットワークトポロジー**: Barabási-Albert（BA）モデル
  - ノード数: 100
  - 各新規ノードが追加される際の接続数（m）: 3
  - スケールフリーネットワーク（ハブ構造を持つ）
- **エッジの帯域幅**: 10-100 Mbps の範囲でランダムに設定（10 Mbps 刻み）
- **エッジの遅延**: 1-10 ms の範囲でランダムに設定（1 ms 刻み）
- **最適化目標**: ボトルネック帯域の最大化（単一目的最適化）
- **ACO パラメータ**:
  - α（フェロモンの重要度）: 1.0
  - β（ヒューリスティックの重要度）: 1.0（従来手法では使用しない）
  - ε（ランダム選択の確率）: 0.1
  - フェロモン揮発率: 0.02（残存率 0.98）
  - TTL（最大ステップ数）: 100

---

## 従来手法（Conventional Method）の詳細

### アルゴリズムの概要

従来手法は、基本的な Ant System (AS)を MBL（Maximum Bottleneck Link）問題に適用した実装です。Mapisse et al. (2011)や Dorigo et al. (1996)の手法をベースにしています。

### パス選択（Path Selection）

**Random Proportional Rule（簡易版）:**

```
p_ij^k = [τ_ij]^α / Σ_l [τ_il]^α
```

- **フェロモンのみを使用**: ヒューリスティック情報（帯域幅など）は使用しない
- **ε-Greedy 戦略**:
  - 確率 ε（0.1）でランダム選択（探索）
  - 確率(1-ε)でフェロモンに基づく確率的選択（活用）

### フェロモン更新（Pheromone Update）

**更新式:**

```
Δτ_ij^k = Q * B_k
```

- **Q**: 調整係数（`q_factor: 1.0`）
- **B_k**: アリ k が見つけた経路のボトルネック帯域（Mbps）
- **更新タイミング**: アリがゴールに到達した時点で即座に付加（オンライン更新）
- **更新対象**: 経路上の全エッジに同じ量を付加（双方向）

**特徴:**

- ボトルネック帯域に比例してフェロモンを付加
- ノード学習機能（BKB/BLD/BKH）は使用しない
- 功績ボーナスは使用しない（見つけた解の品質に関わらず同じ更新式）

### フェロモン揮発（Pheromone Evaporation）

**揮発式:**

```
τ_ij(t+1) = (1 - ρ) * τ_ij(t)
```

- **ρ**: 揮発率（0.02、残存率 0.98）
- **揮発タイミング**: 世代終了時に全エッジを揮発
- **特徴**:
  - 単純な定率揮発のみ
  - ペナルティ付き揮発は使用しない
  - BKB ベースの揮発は使用しない
  - 全エッジで同じ揮発率を適用

### 従来手法の特徴まとめ

| 項目           | 従来手法                                                 |
| -------------- | -------------------------------------------------------- |
| パス選択       | フェロモンのみ（ヒューリスティック不使用）               |
| フェロモン更新 | Δτ = Q \* B_k（ボトルネック帯域値のみを付与）            |
| 更新タイミング | アリがゴールに到達した時点で即座に付加（オンライン更新） |
| フェロモン揮発 | 世代ごとに定期揮発のみ（ペナルティなし）                 |
| ノード学習     | なし                                                     |
| 功績ボーナス   | なし                                                     |

---

## 提案手法（Proposed Method）の概要

提案手法は、従来手法に以下の機能を追加したものです：

1. **自律ノード学習（BKB/BLD/BKH）**: 各ノードが通過したアリの解品質を学習
2. **功績ボーナス**: 見つけた解がノードの記憶を上回る場合、フェロモン付加量を増加
3. **BKB ベースのペナルティ付き揮発**: 有望でないエッジのフェロモンを急速に減少

詳細は論文本文を参照してください。

---

## グラフの読み方

### 一般的な傾向

- **上昇傾向**: 世代が進むにつれて最適解選択率が上昇する場合、アルゴリズムが学習し、最適解への収束が進んでいることを示す
- **高い値で安定**: 高い選択率（例：80%以上）で安定している場合、アルゴリズムが確実に最適解を発見できていることを示す
- **提案手法が従来手法を上回る**: 提案手法の線が従来手法の線より上にある場合、提案手法の方が優れた性能を示している

### 環境ごとの特徴的なパターン

1. **Static Graph**: 両手法とも徐々に上昇し、最終的に高い選択率で安定する傾向
2. **Node Switching**: 100 世代ごとに「のこぎり歯」パターンが現れる可能性（スタートノード切り替え時に一時的に選択率が低下し、その後回復）
3. **Bandwidth Fluctuation**: 帯域変動の影響で、選択率が変動する可能性

---

## 統計情報

各グラフの下に、以下の統計情報が表示されます：

- **Final generation success rate**: 最終世代（1000 世代目）での最適解選択率
- **Average success rate**: 全世代にわたる平均最適解選択率

これらの値により、アルゴリズムの最終的な性能と、全体的な安定性を定量的に評価できます。

---

## 注意事項

- 各データポイントは、100 回の独立したシミュレーションの平均値です
- グラフの線は、各世代での最適解選択率を滑らかに接続したものです
- 1 世代で少なくとも 1 匹のアリが最適解を発見すれば、そのシミュレーションは「成功」とカウントされます
- 最適解の判定は、Modified Dijkstra アルゴリズムで計算された理論的最適解と比較して行われます








