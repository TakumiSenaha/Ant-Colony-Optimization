# ACO Multi-Objective Routing Configuration

experiment:
  name: "step2_bandwidth_delay"
  generations: 1000
  num_ants: 10
  simulations: 100
  target_objectives: ["bandwidth"] # "hops" を追加可能 (Step 1: ["bandwidth", "hops"], Step 3: ["bandwidth", "delay", "hops"])

  # 遅延制約（パレート最適化の前段階として使用）
  delay_constraint:
    enabled: false # 遅延制約を有効にするか
    max_delay: 10.0 # 最大遅延（ms）。この値以下の遅延を持つ経路のみを探索対象とする

  # スタートノード切り替え設定
  start_switching:
    enabled: true # スタートノードを切り替えるかどうか（遅延制約テスト時はfalse）
    switch_interval: 100 # 何世代ごとにスタートノードを切り替えるか
    start_nodes: [] # スタートノードのリスト（空の場合は自動生成、例: [0, 10, 20, 30, 40, 50]）

graph:
  num_nodes: 100
  num_edges: 6 # BA modelのm（各ノードが追加する際のエッジ数）
  graph_type: "barabasi_albert" # "barabasi_albert", "erdos_renyi", "grid", "manual"
  # "manual": 手動設定トポロジ（Environment 1）
  # BAモデルで生成後、最適経路の全リンクを100Mbpsに設定
  # それ以外のリンクは10-90Mbpsのランダム
  bandwidth_range: [10, 100] # Mbps (既存実装: random.randint(1, 15) * 10)
  delay_range: [1, 10] # ms (base delay, 1刻み)
  fluctuation:
    enabled: false # 変動なし環境でテスト（既存実装との比較用）
    model: "ar1" # "ar1", "ar2", "markov_chain", "random_walk"
    target_method: "hub" # "hub", "random", "betweenness"
    target_percentage: 0.1 # 上位10%のハブノード
    update_interval: 1

aco:
  # ACO手法の選択
  # "proposed" (提案手法)
  # "conventional" (従来手法、ACS論文準拠の実装)
  # "basic_aco_no_heuristic" (従来手法1：基本ACO、β=0、ヒューリスティックなし)
  # "basic_aco_with_heuristic" (従来手法2：基本ACO、β=1、ヒューリスティックあり)
  # "previous" (先行研究：エッジベースの学習、w_ij^min/w_ij^maxを使用)
  method: "conventional"

  # === ACS for MBL 論文準拠パラメータ ===
  # 出典: Dorigo & Gambardella (1997) - IEEE Transactions on Evolutionary Computation
  # Section III-D. ACS Parameter Settings (p.56)

  # フェロモンの影響度
  # 論文標準値: α = 1.0
  # MBL問題: 状態遷移規則の確率計算でのみ使用（α=1なので実質τそのもの）
  alpha: 1.0

  # ヒューリスティック情報の重要度（提案手法・先行研究用）
  # 既存実装（aco_main_bkb_available_bandwidth.py）と同じ値
  # 注意: 従来手法（conventional）はConventionalACOSolver内でβ=1.0を設定
  #       （単純適用版: β=2.0だと強すぎるため、1.0に弱める）
  beta_bandwidth: 1.0
  beta_delay: 1.0
  beta_hops: 1.0

  # フェロモン揮発率（提案手法・先行研究用）
  # 既存実装: V = 0.98（残存率）、揮発率 = 0.02
  # 注意: 従来手法（conventional）はConventionalACOSolver内でρ=0.1を設定
  evaporation_rate: 0.02

  # フェロモンの範囲制限（提案手法・先行研究用）
  # 既存実装（aco_main_bkb_available_bandwidth.py）と同じ値
  # min_pheromone: ベース値（実際には次数で計算: 100 * 3 // degree）
  # max_pheromone: 帯域^5で計算
  # 注意: 従来手法（conventional）はConventionalACOSolver内でmin=0.01, max=10.0を設定
  #       （単純適用版: ηとΔτを一貫して正規化したため、正規化スケールに合わせる）
  min_pheromone: 100
  max_pheromone: 1000000000

  # === 従来手法（ACS）専用パラメータ ===
  # Global Best更新戦略（環境変化への適応性向上）
  #
  # 戦略タイプ:
  #   "ttl": TTLモード（一定期間でリセット）
  #          - Global Bestが一定世代経過後に無効化
  #          - 環境変化後、古い解に固執→期限切れ後に急に再探索
  #          - グラフで見ると「階段状」の性能回復
  #   "window": スライディングウィンドウモード（推奨）
  #             - 直近N世代の履歴から最良を選択
  #             - 環境変化に滑らかに適応
  #             - より「賢い」挙動を示す
  #
  # 推奨: "window"をメインの比較対象（Modified ACS）として使用
  global_best_update_strategy: "window" # "ttl" または "window"

  # Global Best保持期間/ウィンドウサイズ
  # - TTLモード: この世代数を超えるとGlobal Bestをリセット
  # - Windowモード: この世代数分の履歴を保持
  global_best_retention: 100

  # === 提案手法・先行研究手法用パラメータ ===
  epsilon: 0.1 # ε-Greedy法（提案手法・先行研究手法で使用）

  # TTL（生存時間）
  ttl: 100

  # 学習パラメータ
  learning:
    bkb_window_size: 100 # リングバッファサイズ（BKB/BLD/BKH共通）
    bonus_factor: 2.0 # 功績ボーナス係数
    penalty_factor: 0.1 # BKBベースペナルティ係数
    volatilization_mode: 3 # 3: BKBベースのペナルティ付き揮発
    bkb_evaporation_rate: 0.001 # BKB値の揮発率（残存率 = 1 - 0.001 = 0.999）
    # 注意: aco_solver.pyでは0.999（残存率）を直接使用しているため、このパラメータは未使用
    delay_tolerance: 5.0 # 遅延の許容誤差（ms）

# パレートフロンティア計算
pareto:
  enabled: true
  max_labels_per_node: 1000 # 各ノードで保持する最大ラベル数（メモリ制約）
  reference_point: [0, 1000, 200] # Hypervolume計算用の基準点 [bandwidth, delay, hops]

# 評価指標
evaluation:
  metrics:
    - "pareto_discovery_rate" # パレート最適解への到達率
    - "dominance_rate" # 支配されない解の割合
    - "hypervolume" # 超体積（Step 3で重要）
    - "convergence_rate" # 収束率

# 出力設定
output:
  save_results: true
  save_interval: 100 # 何世代ごとに中間結果を保存するか
  save_graphs: true # グラフを保存するか
  results_dir: "results"
  log_level: "INFO" # "DEBUG", "INFO", "WARNING", "ERROR"
