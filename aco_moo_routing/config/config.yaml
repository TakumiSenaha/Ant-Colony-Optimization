# ACO Multi-Objective Routing Configuration

experiment:
  name: "step2_bandwidth_delay"
  generations: 1000
  num_ants: 10
  simulations: 100
  target_objectives: ["bandwidth"] # "hops" を追加可能 (Step 1: ["bandwidth", "hops"], Step 3: ["bandwidth", "delay", "hops"])

  # 遅延制約（パレート最適化の前段階として使用）
  delay_constraint:
    enabled: false # 遅延制約を有効にするか
    max_delay: 10.0 # 最大遅延（ms）。この値以下の遅延を持つ経路のみを探索対象とする

  # スタートノード切り替え設定
  start_switching:
    enabled: false # スタートノードを切り替えるかどうか（遅延制約テスト時はfalse）
    switch_interval: 100 # 何世代ごとにスタートノードを切り替えるか
    start_nodes: [] # スタートノードのリスト（空の場合は自動生成、例: [0, 10, 20, 30, 40, 50]）

graph:
  num_nodes: 100
  num_edges: 6 # BA modelのm（各ノードが追加する際のエッジ数）
  graph_type: "barabasi_albert" # "barabasi_albert", "erdos_renyi", "grid", "manual"
  # "manual": 手動設定トポロジ（Environment 1）
  # BAモデルで生成後、最適経路の全リンクを100Mbpsに設定
  # それ以外のリンクは10-90Mbpsのランダム
  bandwidth_range: [10, 100] # Mbps (既存実装: random.randint(1, 15) * 10)
  delay_range: [1, 10] # ms (base delay, 1刻み)
  fluctuation:
    enabled: false # 変動なし環境でテスト（既存実装との比較用）
    model: "ar1" # "ar1", "ar2", "markov_chain", "random_walk"
    target_method: "hub" # "hub", "random", "betweenness"
    target_percentage: 0.1 # 上位10%のハブノード
    update_interval: 1

aco:
  # ACO手法の選択
  # "proposed" (提案手法)
  # "conventional" (従来手法、beta_bandwidthの値で動作が変わる)
  # "basic_aco_no_heuristic" (従来手法1：基本ACO、β=0、ヒューリスティックなし)
  # "basic_aco_with_heuristic" (従来手法2：基本ACO、β=1、ヒューリスティックあり)
  # "previous" (先行研究：エッジベースの学習、w_ij^min/w_ij^maxを使用)
  method: "proposed"

  # 従来手法用のパラメータ（method: "conventional" の場合に使用）
  q_factor: 1.0 # フェロモン付加量の調整係数（Δτ = Q * B_k）

  # フェロモンの影響度
  alpha: 1.0

  # ヒューリスティック情報の重要度（目的関数ごと）
  beta_bandwidth: 1.0
  beta_delay: 1.0
  beta_hops: 1.0

  # 状態遷移ルール
  # ACS方式のPseudo-Random-Proportional Rule（従来手法用）
  q0: 0.9 # 最良エッジを選択する確率（0.0-1.0）。大きいほどexploitation（活用）が強い

  # ACS方式のローカル更新用パラメータ（従来手法用）
  local_update_xi: 0.1 # ローカル更新の強度（0.0-1.0）
  initial_pheromone: 100.0 # 初期フェロモン値τ_0

  epsilon: 0.1 # ε-Greedy法（提案手法・先行研究手法で使用）

  # 異質なアリ（Heterogeneous Ants）の設定
  # 注意: 現在は未使用。全てのアリは同じパラメータ（beta_bandwidth=1.0, beta_delay=1.0）で経路を選択します。
  # heterogeneous_ants:
  #   enabled: false # 異質なアリを使用するか
  #   bandwidth_preference_weight: 2.0 # 帯域重視のアリの帯域重み
  #   bandwidth_preference_delay_weight: 0.5 # 帯域重視のアリの遅延重み
  #   delay_preference_weight: 0.5 # 遅延重視のアリの帯域重み
  #   delay_preference_delay_weight: 2.0 # 遅延重視のアリの遅延重み
  #   bandwidth_preference_ratio: 0.5 # 帯域重視のアリの割合（0.0-1.0）

  # フェロモン関連
  evaporation_rate: 0.02 # 揮発率（1 - 残存率0.98）
  min_pheromone: 100
  max_pheromone: 1000000000

  # TTL（生存時間）
  ttl: 100

  # 学習パラメータ
  learning:
    bkb_window_size: 100 # リングバッファサイズ（BKB/BLD/BKH共通）
    bonus_factor: 2.0 # 功績ボーナス係数
    penalty_factor: 0.5 # BKBベースペナルティ係数
    volatilization_mode: 3 # 3: BKBベースのペナルティ付き揮発
    bkb_evaporation_rate: 0.001 # BKB値の揮発率（1 - 残存率0.999）
    delay_tolerance: 5.0 # 遅延の許容誤差（ms）

# パレートフロンティア計算
pareto:
  enabled: true
  max_labels_per_node: 1000 # 各ノードで保持する最大ラベル数（メモリ制約）
  reference_point: [0, 1000, 200] # Hypervolume計算用の基準点 [bandwidth, delay, hops]

# 評価指標
evaluation:
  metrics:
    - "pareto_discovery_rate" # パレート最適解への到達率
    - "dominance_rate" # 支配されない解の割合
    - "hypervolume" # 超体積（Step 3で重要）
    - "convergence_rate" # 収束率

# 出力設定
output:
  save_results: true
  save_interval: 100 # 何世代ごとに中間結果を保存するか
  save_graphs: true # グラフを保存するか
  results_dir: "results"
  log_level: "INFO" # "DEBUG", "INFO", "WARNING", "ERROR"
